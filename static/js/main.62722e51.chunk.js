(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,r){e.exports=r(73)},53:function(e,t,r){},55:function(e,t,r){},57:function(e,t,r){},59:function(e,t,r){},61:function(e,t,r){},63:function(e,t,r){},65:function(e,t,r){},67:function(e,t,r){},69:function(e,t,r){},71:function(e,t,r){},73:function(e,t,r){"use strict";r.r(t);var a,n,c,s,o=r(1),i=r.n(o),u=r(33),l=r.n(u),p=r(9),h=r(77),d=r(21),f=r(37),m=r(5),b=r(7),E=r(18),O=Object(E.createDuck)("session-duck"),j=O.defineType("UPDATE_SESSION"),v=O.createAction(j),y=O.createReducer(Object(m.a)({},j,function(e,t){return Object(b.a)({},e,t.payload)}),{isAuthenticated:!1,redirectToReferrer:!1}),k=Object(E.createDuck)("errors-duck"),C=k.defineType("ADD_ERRORS"),g=k.defineType("CLEAR_ERROR"),A=k.createAction(C),S=k.createAction(g),T=k.createReducer((a={},Object(m.a)(a,C,function(e,t){return{messages:e.messages.concat(t.payload)}}),Object(m.a)(a,g,function(e){return Object(b.a)({},e,{messages:[]})}),a),{messages:[]}),R=Object(E.createDuck)("characters-duck"),N=R.defineType("SET_SELECTED"),x=R.defineType("CLEAR_SELECTED"),w=R.defineType("ADD_CHARACTERS"),_=R.createAction(x),D=R.createAction(N),H=R.createAction(w),I=R.createReducer((n={},Object(m.a)(n,N,function(e,t){return Object(b.a)({},e,{selected:Object(b.a)({},e.selected,Object(m.a)({},t.payload.type,t.payload.id))})}),Object(m.a)(n,w,function(e,t){return Object(b.a)({},e,{characters:Object(b.a)({},e.characters,t.payload)})}),Object(m.a)(n,x,function(e,t){return Object(b.a)({},e,{selected:{hero:"",villain:""}})}),n),{characters:{},selected:{hero:"",villain:""}}),L=Object(E.createDuck)("search-duck"),B=L.defineType("SET_SEARCH_BY"),P=L.defineType("ADD_SEARCH_RESULTS"),U=L.createAction(B),G=L.createAction(P),K=L.createReducer((c={},Object(m.a)(c,B,function(e,t){return Object(b.a)({},e,{searchBy:Object(b.a)({},e.searchBy,Object(m.a)({},t.payload.type,t.payload.name))})}),Object(m.a)(c,P,function(e,t){return Object(b.a)({},e,{results:Object(b.a)({},e.results,Object(m.a)({},t.payload.name,t.payload.results))})}),c),{results:{},searchBy:{hero:"",villain:""}}),q=Object(E.createDuck)("spinner-duck"),F=q.defineType("ACTIVATE"),J=q.defineType("DEACTIVATE"),M=q.createAction(F),V=q.createAction(J),W=q.createReducer((s={},Object(m.a)(s,F,function(e,t){return Object(b.a)({},e,Object(m.a)({},t.payload||"default",!0))}),Object(m.a)(s,J,function(e,t){return Object(b.a)({},e,Object(m.a)({},t.payload||"default",!1))}),s),{default:!1}),Y=Object(d.c)({characters:I,errors:T,search:K,session:y,spinner:W}),z=r(12),Q=r.n(z),X=r(4),Z=function(e){if(!e.ok)throw e;return e},$="".concat("https://cors-anywhere.herokuapp.com/","http://superheroapi.com/api/"),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.atob(window.sessionStorage.getItem("accessToken"));return"".concat($).concat(e)},te={fetchCharacter:function(e){var t=e.accessToken,r=e.id,a=ee(t);return fetch("".concat(a,"/").concat(r,"/"),{headers:{Accept:"text/html,application/xhtml+xml,application/xml","Access-Control-Request-Method":"GET"}}).then(Z).then(function(e){return e.json()})},searchCharacters:function(e){var t=e.name;return fetch("".concat(ee(),"/search/").concat(t)).then(Z).then(function(e){return e.json()})}},re={LOGIN_USER:"LOGIN_USER",SEARCH_CHARACTERS:"SEARCH_CHARACTERS"},ae={"access denied":"Invalid access token.","invalid id":"Invalid id supplied.","bad name search request":"Invalid search request.",general:"Something went wrong. Please try again."},ne={hero:"good",villain:"bad"},ce=Q.a.mark(ie),se=Q.a.mark(ue),oe=Q.a.mark(le);function ie(e){var t,r,a,n;return Q.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload.accessToken,c.next=4,Object(X.b)(te.fetchCharacter,{accessToken:t,id:1});case 4:if(r=c.sent,a=r.response,n=r.error,"error"!==a){c.next=14;break}return c.next=10,Object(X.c)(v({isAuthenticated:!1}));case 10:return c.next=12,Object(X.c)(A([ae[n]]));case 12:c.next=17;break;case 14:return window.sessionStorage.setItem("accessToken",window.btoa(t)),c.next=17,Object(X.c)(v({isAuthenticated:!0,redirectToReferrer:!0}));case 17:c.next=23;break;case 19:return c.prev=19,c.t0=c.catch(0),c.next=23,Object(X.c)(A([ae.general]));case 23:return c.next=25,Object(X.c)(V());case 25:case"end":return c.stop()}},ce,this,[[0,19]])}function ue(){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.e)(re.LOGIN_USER,ie);case 2:case"end":return e.stop()}},se,this)}function le(){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.a)([ue()]);case 2:case"end":return e.stop()}},oe,this)}var pe=Q.a.mark(fe),he=Q.a.mark(me),de=Q.a.mark(be);function fe(e){var t,r,a,n,c,s,o,i,u,l;return Q.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,t=e.payload,r=t.name,a=t.type,p.next=4,Object(X.d)(function(e){return e.search});case 4:if(n=p.sent,!n.results[r]){p.next=11;break}return p.next=9,Object(X.c)(U({name:r,type:a}));case 9:p.next=30;break;case 11:return p.next=13,Object(X.b)(te.searchCharacters,{name:r});case 13:if(c=p.sent,s=c.response,o=c.error,i=c.results,"error"!==s){p.next=22;break}return p.next=20,Object(X.c)(A([ae[o]]));case 20:p.next=30;break;case 22:return p.next=24,Object(X.c)(U({name:r,type:a}));case 24:return u={},l=i.map(function(e){return u[e.id]=e,e.id}),p.next=28,Object(X.c)(H(u));case 28:return p.next=30,Object(X.c)(G({name:r,results:l}));case 30:p.next=36;break;case 32:return p.prev=32,p.t0=p.catch(0),p.next=36,Object(X.c)(A([ae.general]));case 36:return p.next=38,Object(X.c)(V());case 38:case"end":return p.stop()}},pe,this,[[0,32]])}function me(){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.e)(re.SEARCH_CHARACTERS,fe);case 2:case"end":return e.stop()}},he,this)}function be(){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.a)([me()]);case 2:case"end":return e.stop()}},de,this)}var Ee={characters:be,session:le},Oe=(r(49),r(50),Object(f.a)()),je=[Oe],ve=Object(d.d)(Y,d.a.apply(void 0,je));Object.values(Ee).forEach(function(e){return Oe.run(e)});var ye=ve,ke=r(13),Ce=r(14),ge=r(16),Ae=r(15),Se=r(17),Te=r(79),Re=r(75),Ne=r(78),xe=r(76),we=r(38),_e=Object(p.b)(function(e){return{isAuthenticated:e.session.isAuthenticated}})(function(e){var t=e.component,r=e.isAuthenticated,a=Object(we.a)(e,["component","isAuthenticated"]);return i.a.createElement(Re.a,Object.assign({},a,{render:function(e){return r?i.a.createElement(t,e):i.a.createElement(Ne.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),De=(r(53),function(e){var t=e.errors;return t&&t.length>0?i.a.createElement("div",{className:"error-alert"},t.map(function(e,t){return i.a.createElement("p",{className:"error",key:t},e)})):null}),He=(r(55),function(e){function t(){var e,r;Object(ke.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(ge.a)(this,(e=Object(Ae.a)(t)).call.apply(e,[this].concat(n)))).state={accessToken:""},r.onLoginClick=function(){var e=r.state.accessToken,t=r.props,a=t.loginUser,n=t.addErrors,c=t.clearError,s=t.activateSpinner;c(),e&&0!==e.length?(s(),a(e)):n(["Access token field is empty."])},r.onTokenChange=function(e){(0,r.props.clearError)(),r.setState({accessToken:e.target.value})},r}return Object(Se.a)(t,e),Object(Ce.a)(t,[{key:"render",value:function(){var e=this.props,t=e.redirectToReferrer,r=e.isAuthenticated;return t&&r?i.a.createElement(Ne.a,{to:"/"}):i.a.createElement("div",{className:"login"},i.a.createElement("div",{className:"title"},"Welcome Cadet"),i.a.createElement("fieldset",{className:"login-field"},i.a.createElement("label",{className:"login-label",htmlFor:"field"},"Acess Token"),i.a.createElement("input",{autoFocus:!0,id:"token",type:"password",className:"token-input",value:this.state.accessToken,onChange:this.onTokenChange})),i.a.createElement(De,{errors:this.props.errors}),i.a.createElement("div",{className:"container"},i.a.createElement("button",{className:"login-button",onClick:this.onLoginClick},"Login")))}}]),t}(o.Component)),Ie=Object(p.b)(function(e){return{errors:e.errors.messages,redirectToReferrer:e.session.redirectToReferrer,isAuthenticated:e.session.isAuthenticated}},function(e){return{activateSpinner:function(){return e(M())},addErrors:function(t){return e(A(t))},clearError:function(){return e(S())},loginUser:function(t){return e({type:re.LOGIN_USER,payload:{accessToken:t}})}}})(He),Le=r(24),Be=function(e,t){return t.type},Pe=function(e){return e.characters.characters},Ue=Object(Le.a)([Be,function(e){return e.search.searchBy}],function(e,t){return t[e]}),Ge=Object(Le.a)([Ue,function(e){return e.search.results}],function(e,t){return e?t[e]:[]}),Ke=Object(Le.a)([Be,Pe,Ge],function(e,t,r){var a=[];return r&&r.length>0&&r.forEach(function(r){var n=t[r];n&&n.biography.alignment===ne[e]&&a.push(n)}),a}),qe=Object(Le.a)([Be,function(e){return e.characters.selected}],function(e,t){return t[e]}),Fe=Object(Le.a)([qe,Pe],function(e,t){return t[e]}),Je=r(36),Me=r.n(Je),Ve=function(e){var t=e.url,r=e.className;return i.a.createElement("div",{className:r},i.a.createElement("img",{alt:"character",src:t}))},We=function(e){var t=e.data,r=e.className;return Object.keys(t).map(function(e){var a,n="null"!==(a="string"===typeof t[e]?t[e]:t[e][0])&&"-"!==a&&a?a:"--";return i.a.createElement("p",{className:r,key:e},e,": ",n)})},Ye=(r(57),function(e){var t=e.data,r=e.onClickHandler,a=e.selected,n=t.name,c=t.image,s=t.powerstats,o=Me()("profile",{"profile--selected":a});return i.a.createElement("div",{className:o,onClick:r},i.a.createElement(Ve,{className:"profile-picture",url:c.url}),i.a.createElement("p",{className:"name"},n),i.a.createElement("div",{className:"profile-info"},s&&i.a.createElement(We,{data:s,className:"profile-stats"})))}),ze=(r(59),function(e){function t(){var e,r;Object(ke.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(ge.a)(this,(e=Object(Ae.a)(t)).call.apply(e,[this].concat(n)))).state={name:""},r.onKeyPress=function(e){"Enter"===e.key&&r.onSearchClick()},r.onSearchChange=function(e){r.setState({name:e.target.value})},r.onSearchClick=function(){var e=r.state.name,t=r.props,a=t.searchCharacters,n=t.type,c=t.activateSpinner,s=t.addErrors;(0,t.clearError)(),0===e.length?s(["Name is missing."]):(c(),a({name:e,type:n}))},r.onCharacterSelect=function(e){return function(){var t=r.props,a=t.type;(0,t.setSelectedCharacter)({type:a,id:e})}},r.getProfiles=function(){var e=r.props,t=e.characters,a=e.searchBy,n=e.type,c=e.selectedId;if(a[n]){return t&&t.length>0?t.map(function(e,a){var n=e.id;return i.a.createElement("div",{key:n},i.a.createElement(Ye,{data:e,onClickHandler:r.onCharacterSelect(n),selected:c===n}),function(e){return t.length>1&&e!==t.length-1}(a)&&i.a.createElement("hr",null))}):i.a.createElement("div",null,i.a.createElement("p",null,"No character was found"))}},r}return Object(Se.a)(t,e),Object(Ce.a)(t,[{key:"render",value:function(){var e=this.getProfiles();return i.a.createElement("div",{className:"search-".concat(this.props.type),id:"search"},i.a.createElement("div",{className:"title"},this.props.type),i.a.createElement("input",{placeholder:"Type a name to search by",onChange:this.onSearchChange,onKeyPress:this.onKeyPress,value:this.state.name||"",className:"search-input"}),i.a.createElement("button",{onClick:this.onSearchClick},"SEARCH"),i.a.createElement("div",{className:"profile-list"},e))}}]),t}(o.Component)),Qe=Object(p.b)(function(e,t){return{characters:Ke(e,t),searchBy:e.search.searchBy,selectedId:qe(e,t)}},function(e){return{activateSpinner:function(){return e(M())},addErrors:function(t){return e(A(t))},clearError:function(){return e(S())},searchCharacters:function(t){return e({type:re.SEARCH_CHARACTERS,payload:t})},setSelectedCharacter:function(t){return e(D(t))}}})(ze),Xe=(r(61),function(e){function t(){var e,r;Object(ke.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(ge.a)(this,(e=Object(Ae.a)(t)).call.apply(e,[this].concat(n)))).onCompareClick=function(){var e=r.props,t=e.history,a=e.selected,n=e.addErrors;(0,e.clearError)(),a.hero&&a.villain?t.push("/compare"):n(["Please select both hero and a villain."])},r}return Object(Se.a)(t,e),Object(Ce.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"home"},i.a.createElement(Qe,{type:"hero"}),i.a.createElement(Qe,{type:"villain"}),i.a.createElement(De,{errors:this.props.errors}),i.a.createElement("button",{className:"compare-button",onClick:this.onCompareClick},"COMPARE"))}}]),t}(o.Component)),Ze=Object(p.b)(function(e){return{errors:e.errors.messages,selected:e.characters.selected}},function(e){return{addErrors:function(t){return e(A(t))},clearError:function(){return e(S())}}})(Xe),$e=(r(63),function(e){var t=e.data,r=t.name,a=t.image,n=t.powerstats,c=t.biography,s=t.appearance;return i.a.createElement("div",{className:"character"},i.a.createElement(Ve,{className:"character-picture",url:a.url}),i.a.createElement("div",{className:"character-details"},i.a.createElement("p",null,"Name: ",r),i.a.createElement("p",null,"Full Name: ",c["full-name"]),function(){var e=[];return[n,s].forEach(function(t,r){t&&e.push(i.a.createElement(We,{key:r,data:s,className:"character-info"}))}),e}()))}),et=function(e){function t(){return Object(ke.a)(this,t),Object(ge.a)(this,Object(Ae.a)(t).apply(this,arguments))}return Object(Se.a)(t,e),Object(Ce.a)(t,[{key:"render",value:function(){var e=this.props.character;return e?i.a.createElement("div",{className:"character-".concat(this.props.type)},i.a.createElement($e,{data:e})):null}}]),t}(o.Component),tt=Object(p.b)(function(e,t){return{character:Fe(e,t)}})(et),rt=(r(65),function(e){function t(){var e,r;Object(ke.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(ge.a)(this,(e=Object(Ae.a)(t)).call.apply(e,[this].concat(n)))).onBackToSearchClick=function(){var e=r.props,t=e.history;(0,e.clearSelected)(),t.push("/")},r}return Object(Se.a)(t,e),Object(Ce.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"result"},i.a.createElement("div",{className:"title"},"RESULT"),i.a.createElement(tt,{type:"hero"}),i.a.createElement(tt,{type:"villain"}),i.a.createElement("button",{onClick:this.onBackToSearchClick},"BACK TO SEARCH"))}}]),t}(o.Component)),at=Object(p.b)(function(e){return{errors:e.errors.messages,selected:e.characters.selected}},function(e){return{addErrors:function(t){return e(A(t))},clearSelected:function(){return e(_())}}})(rt),nt=(r(67),function(e){function t(){return Object(ke.a)(this,t),Object(ge.a)(this,Object(Ae.a)(t).apply(this,arguments))}return Object(Se.a)(t,e),Object(Ce.a)(t,[{key:"render",value:function(){var e=this.props.isLoading;return i.a.createElement("div",{className:"app"},e&&i.a.createElement("div",{className:"overlay"},i.a.createElement("div",{className:"spinner"})),i.a.createElement(Te.a,null,i.a.createElement(_e,{exact:!0,path:"/",component:Ze}),i.a.createElement(_e,{path:"/compare",component:at}),i.a.createElement(Re.a,{path:"/login",component:Ie}),i.a.createElement(Ne.a,{path:"*",to:"/"})))}}]),t}(o.Component)),ct=Object(xe.a)(Object(p.b)(function(e){return{isLoading:e.spinner.default}})(nt)),st=(r(69),r(71),document.getElementById("root"));l.a.render(i.a.createElement(p.a,{store:ye},i.a.createElement(h.a,null,i.a.createElement(ct,null))),st)}},[[39,2,1]]]);
//# sourceMappingURL=main.62722e51.chunk.js.map